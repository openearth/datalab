{% extends "base.html" %}
{% load i18n l10n %}

{% block title %}
    {% trans "Processing environments" %}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-lg-8">
            <h1 class="page-header">{% trans "Processing environments" %}</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    {% trans 'Environments' %}
                    <span class="pull-right">
                        <a href="{% url 'environment_create' %}" class="btn btn-primary btn-xs" role="button">
                            <i class="fa fa-plus"></i> {% trans 'New' %}
                        </a>
                    </span>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>{% trans 'Id' %}</th>
                                    <th>{% trans 'Name' %}</th>
                                    <th>{% trans 'Type' %}</th>
                                    <th>{% trans 'Repository' %}</th>
                                    <th>{% trans 'OpenEarthTools' %}</th>
                                    <th>{% trans 'Created&nbsp;date' %}</th>
                                    <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for environment in object_list %}
                                    <tr onclick="javascript:window.location.href='{% url 'environment_detail' environment.id %}';" style="cursor:pointer;">
                                        <td>{{ environment.pk }}</td>
                                        <td>{{ environment.name }}</td>
                                        <td>{{ environment.libvirt_image.name }}</td>
                                        <td><a target="_blank" href="{{ environment.get_repo_url }}">{{ environment.get_repo_url }}</a></td>
                                        <td>{{ environment.open_earth|yesno:"enabled,disabled" }}</td>
                                        <td>{{ environment.created_date }}</td>
                                        <td>{% if environment.jobs|length_is:"0"  %}<a href="{% url 'environment_update' environment.id %}" title="{% trans "Edit" %}"><i class="fa fa-pencil-square-o fa-fw"></i></a>{% endif %}</td>
                                        <!-- <td>
                                            <a href="{% url 'environment_update' environment.id %}" title="{% trans "Edit" %}"><i class="fa fa-pencil-square-o fa-fw"></i></a>
                                            <a href="{% url 'jobs' environment.id %}" title="{% trans "Job list" %}"><i class="fa fa-list-ol fa-fw"></i></a>
                                            <a href="{% url 'job_create' environment.id %}" title="{% trans "Create job" %}"><i class="fa fa-briefcase fa-fw"></i></a>
                                        </td> -->
                                    </tr>
                                {% empty %}
                                    <tr>
                                        <td colspan="7">{% trans 'No Processing environments defined' %}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>

    </div>
    <!-- /.row -->
{% endblock %}
